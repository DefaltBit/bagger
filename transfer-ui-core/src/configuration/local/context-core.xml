<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p" 
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-2.5.xsd
        http://www.springframework.org/schema/tx
        http://www.springframework.org/schema/tx/spring-tx.xsd"
  default-autowire="byName">

    <context:component-scan base-package="gov.loc.repository.transfer.ui.controllers" />
  
    <bean id="jaxb2Marshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
        <property name="contextPath" value="org.jvnet.hyperjaxb3.ejb.tests.po"/>
    </bean>
  
    <bean id="entityManagerFactory"
     class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
     <property name="jpaVendorAdapter">
        <bean
        class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
           <property name="showSql" value="true" />
           <property name="generateDdl" value="true" />
           <property name="databasePlatform" value="org.hibernate.dialect.HSQLDialect" />
        </bean>
     </property>
    </bean>

    <bean id="dataSource"
     class="org.apache.commons.dbcp.BasicDataSource"
     destroy-method="close">
        <property name="driverClassName" value="org.hsqldb.jdbcDriver" />
        <property name="url" value="jdbc:hsqldb:target/src/test/db/myDB" />
        <property name="username" value="sa" />
        <property name="password" value="" />
    </bean>

   <bean id="transactionManager"
     class="org.springframework.orm.jpa.JpaTransactionManager" />
  
  <tx:annotation-driven />

  <bean
     class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />
 
  <bean id="purchaseOrderDAO" class="gov.loc.repository.transfer.ui.dao.PurchaseOrderTypeDAO" />

  <bean id="exampleController" class="gov.loc.repository.transfer.ui.controllers.ExampleController"/>
  
    
    
    <bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
    	<property name="basenames">
    		<list>
    			<value>messages</value>
    			<value>application</value>
    		</list>
    	</property>
    </bean>
    
    <!--bean id="tilesConfigurer" class="gov.loc.repository.transfer.ui.springframework.TilesConfigurer">
    	<property name="definitionPattern"  value="page-views*.xml" />
    	<property name="definitionPath"     value="/WEB-INF/views" />
    </bean-->
    
    <!--bean id="tilesConfigurer" class="gov.loc.repository.transfer.ui.springframework.TilesConfigurer">
	    <property name="factoryClass" value="org.apache.struts.tiles.xmlDefinition.I18nFactorySet"/>
		<property name="definitionPath" value="/WEB-INF/views/" />
		<property name="definitionPattern" value="pages-*.xml" />
    </bean>

	<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
		<property name="maxUploadSize" value="1000000"/>
	</bean>
	
	<bean id="velocityConfig" 
    class="org.springframework.web.servlet.view.velocity.VelocityConfigurer">
		<property name="resourceLoaderPath" value="/WEB-INF/views/templates"/>
		<property name="velocityProperties"> <props>
				<prop key="input.encoding"                      >UTF-8</prop>
				<prop key="output.encoding"                     >UTF-8</prop>
				<prop key="runtime.log.logsystem.class"         >org.apache.velocity.runtime.log.SimpleLog4JLogSystem</prop>
				<prop key="runtime.log.logsystem.log4j.category">org.apache.velocity.runtime.log.SimpleLog4JLogSystem</prop>
				<prop key="runtime.log.error.stacktrace"        >false</prop>
				<prop key="runtime.log.warn.stacktrace"         >false</prop>
				<prop key="runtime.log.info.stacktrace"         >false</prop>
				<prop key="runtime.log.invalid.reference"       >true</prop>
		        <prop key="velocimacro.library"                 >macros-functions.vm</prop>
				<prop key="velocimacro.permissions.allow.inline">true</prop>
				<prop key="velocimacro.permissions.allow.inline.to.replace.global">false</prop>
				<prop key="velocimacro.permissions.allow.inline.local.scope">false</prop>
				<prop key="velocimacro.context.localscope"      >false</prop>
				<prop key="velocimacro.library.autoreload"      >true</prop>
				<prop key="file.resource.loader.cache"          >false</prop>
				<prop key="directive.foreach.counter.name"      >velocityCount</prop>
				<prop key="directive.foreach.counter.initial.value">1</prop>
		</props> </property>
	</bean>	

  <bean id="viewResolver" class="org.springframework.web.servlet.view.velocity.VelocityViewResolver">
  	<property name="cache"                    value="true" />
  	<property name="prefix"                   value="" />
  	<property name="exposeSpringMacroHelpers" value="true" />
  	<property name="order"                    value="1"/>
  	<property name="contentType"              value="text/html; charset=utf-8"/>
  	<property name="toolboxConfigLocation"    value="WEB-INF/velocity-toolbox.xml"/>
    <property name="suffix"                   value="" />
    <property name="viewClass"                value="gov.loc.repository.transfer.ui.springframework.VelocityTilesView" />
  </bean-->
</beans>
