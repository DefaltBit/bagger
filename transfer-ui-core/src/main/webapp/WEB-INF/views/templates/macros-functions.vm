#*
  - Blocks are just a simple way to reference view templates
  - passed from the tiles page layouts.
*#  
#macro( block $name )
  #if ($tiles.getAttribute($name))
    #parse($tiles.getAttribute($name))
  #end
#end

#*
  - attr is just a convient way to get tiles.getAttribute($name)
*#  
#macro( attr $name )$tiles.getAttribute($name)#end

#*
  - context refers to the globally configured app context root
*#  
#macro( context $contextPath )
    #if ($contextPath)
        $contextPath
    #end
#end

#*
  -The i18n macro to simplify working with spring and providing defaults
*#
#macro( I18N  $resourceMessageBase $resourceMessageCode)
    #set ($code = "${resourceMessageBase}.${resourceMessageCode}")
    #springMessageText($code)
#end

#*
  -Prints a login required message
*#
#macro( login_required )
	<br/>
	<h4>To view, please <a href="${contextPath}/login/login.html#if($referer)?referer=$escape.url($referer)#end"">log in</a>.</h4>
#end

#*
  -Writes out a variable
*#
#macro( variable $variableBean $taskInstanceBean )
	#set($variableValue = "")
	#set($variableValue = $taskInstanceBean.variableMap.get($variableBean.id))
	#if($variableBean.writable)
		<label for="variable${variableBean.id}">
		    ${variableBean.name}:		    
		<label>
		<input id="variable${variableBean.id}"
		    type="text" 
		    name="variable.${variableBean.id}" 
		    value="$variableValue" />
		#if ($variableBean.required)
			&nbsp;&nbsp;(Required)
		#end
	#else
	    <label for="variable${variableBean.id}">
		    $variableBean.name:
	    <label>
		<span id="variable${variableBean.id}">
		    $variableValue
		</span>
	#end
#end

#*
  -Writes out collection of ObjectEntries
*#
#macro( object_entries $entries )
	#set($sep = "")
	{#foreach($entry in $entries)$sep$entry.key=$!{entry.value}#set($sep = ", ")#end}
#end

#*
  -Writes the header table for a sortable pagable table
*#
#macro ( tablesorter $id $size)
	#if( $size > 10)
		<div id="${id}_pager" class="pager">
	        <form>
	    		<img src="${contextPath}/images/icons/first.png" class="first"/>
	    		<img src="${contextPath}/images/icons/prev.png" class="prev"/>
	    		<label for="${id}_pagedisplay">Showing page </label>
	    		<input id="${id}_pagedisplay" type="text" class="pagedisplay"/>
	    		<img src="${contextPath}/images/icons/next.png" class="next"/>
	    		<img src="${contextPath}/images/icons/last.png" class="last"/>
	    		<label for="${id}_pagesize">Results per page: </label>
	    		<select id="${id}_pagesize" class="pagesize">
	    			<option selected="selected" value="10">10</option>
	    			<option value="25">25</option>
	    			<option value="50">50</option>
	    			<option value="100">100</option>			        			
	    		</select>
	        </form>
	    </div>
    #end
#end

#*
	-Writes comments
*#
#macro ( list_comments $commentBeanList)
	#foreach($commentBean in $sorter.sort($commentBeanList, 'createDate:desc'))
		<div>
			<dl>
				<dt>User:</dt>
				<dd>$commentBean.userBean.name</dd>
				<dt>Comment date:</dt>
				<dd>${date.format('yyyy-MM-dd hh:mm', $commentBean.createDate)}</dd>
				<dt>Comment:</dt>
				<dd><p>$escape.html($commentBean.message)</p></dd>
	        </dl>
	    </div>
	#end
#end