<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
	<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=iso-8859-1" />
		<title>Bagger Application - Repository Development Center (Library of Congress)</title>
		<link rel="stylesheet" type="text/css" media="print" href="../css/deposit_print.css" />
		<link rel="stylesheet" type="text/css" href="../css/deposit.css" />
	</head>
<body>
<div id="container"><a id="skip" href="#skip_menu">skip navigation</a>
  <div id="header">
    <ul>
      <li id="logo"><a href="../index.html"><img src="../images/bagger_logo.jpg" alt="" /></a></li>
      <li id="welcome"></li>
      <li id="contact"><img src="../images/mail.gif" alt="" /><a href="mailto:lesliej@loc.gov">Contact</a></li>
    </ul>
  </div>

  <div id="navlist">
  <div id="page_head"><h1><a href="../index.html">Home</a>: <a href="index.html">Bagger User Guide</a>: Checking Bag Status</h1>
    <div id="content">
      <a href="bagfiles.html">Previous</a>
      <a href="baginfo.html">Next</a>
    </div>

    <a name="complete"></a>
      <div id="page_head"><h2>Checking that a bag is complete</h2></div>
      <div id="content">
        <p>From the BagIt specification: A bag is considered complete if every file in every payload manifest and tag manifest is present, and if every payload file appears in at least one payload manifest. A payload file does not need to appear in every payload manifest as long as it appears in one payload manifest (i.e., it must belong to the "union" of payload manifests). In a complete bag containing one or more tag manifests, any tag file may appear in zero or more of those manifests, but every tag file appearing in any tag manifest must be present in the bag.</p>
      </div>

      <div id="content">
		<ul>Basic flow:<br/>
		   <li>1. User selects to check that a bag is complete.<br/></li>
		   <li>2. Application checks that a bag is complete.<br/></li>
		   <li>3. If a Project profile has been selected, application checks that it has been satisfied.<br/></li>
		   <li>4. Application updates the displayed information with the result, including warning about any unsatisfied fields from Project profile.<br/></li>
		</ul>
		<ul>
			<li>Note: A user may want to check that a bag is complete instead of verifying a bag because it is less time-consuming.</li>
		</ul>
	  </div>

      <div id="content">
        <p>In order to check for a bag’s completeness, the bag must first be saved.  Once the bag is saved to disk, the ‘Check is Complete’ button will be enabled.  Select the ‘Check is Complete’ button.</p>
	    <p>
	    <img src="images/bagger_iscomplete_dialog.jpg" alt="Check is complete" />
	    </p>
	    <p>When a bag is complete, the ‘Is Complete Dialog’ pops up with the message: ‘Bag is complete.’ </p>
	    <p>
	    <img src="images/bagger_iscomplete_complete.jpg" alt="Bag is complete" />
	    </p>
	    <p>Selecting Ok on the popup dialog displays the bag and the ‘Is bag complete?’ state message will now display ‘yes’.</p>
      </div>

      <div id="page_head"><h2>Incomplete bag</h2></div>
      <div id="content">
	    <p>
	    <img src="images/bagger_iscomplete_incomplete.jpg" alt="Warning incomplete" />
	    </p>
	    <p>If a bag is not complete, a ‘Warning - incomplete’ popup dialog will appear and display the problem causing the bag to be incomplete.  In this example, there is a file in the data payload called ‘robots.txt’ which is not found in the ‘manifest-md5.txt’ tag file. </p>
	    <p>
	    <img src="images/bagger_iscomplete_no.jpg" alt="Bag is incomplete" />
	    </p>
	    <p>Selecting Ok on the popup dialog displays the bag and the ‘Is bag complete?’ state message will now display ‘no’.</p>
      </div>

    <a name="valid"></a>
      <div id="page_head"><h2>Checking that a bag is valid</h2></div>
        <p>The spec does not require a bag-info.txt at all, let alone the contact information.
		A bag is considered valid if it is complete and if each CHECKSUM in every payload manifest and tag manifest can be verified against the contents of its corresponding FILENAME.
		Note that tag files (including tag manifest files) can be added to or removed from a bag without impacting the completeness or validity of the bag as long as the tag files do not appear in a tag manifest. </p>
	  </div>

      <div id="content">
		<ul>Basic flow:<br/>
		   <li>1. User selects to check that a bag is valid.<br/></li>
		   <li>2. Application checks that a bag is valid.<br/></li>
		   <li>3. If a Project profile has been selected, application checks that it has been satisfied.<br/></li>
		   <li>4. Application updates the displayed information with the result, including warning about any unsatisfied fields from Project profile.<br/></li>
		</ul>
	  </div>

      <div id="content">
        <p>In order to check for a bag’s validity, the bag must first be saved.  Once the bag is saved to disk, the ‘Check is Valid’ button will be enabled.  Select the ‘Check is Valid’ button.</p>
	    <p>
	    <img src="images/bagger_isvalid_dialog.jpg" alt="Check is valid" />
	    </p>
	    <p>When a bag is valid, the ‘Validation Dialog’ pops up with the message: ‘Validation successful.’ </p>
	    <p>
	    <img src="images/bagger_isvalid_valid.jpg" alt="Bag is valid" />
	    </p>
	    <p>Selecting Ok on the popup dialog displays the bag and both the ‘Is bag complete?’ and ‘Is bag valid?’ state messages will now display ‘yes’.</p>
	  </div>

      <div id="page_head"><h2>Invalid bag</h2></div>
      <div id="content">
	    <p>
	    <img src="images/bagger_isvalid_invalid.jpg" alt="Warning invalid" />
	    </p>
	    <p>If a bag is not valid, a ‘Warning - validation failure’ popup dialog will appear and display the problem causing the bag to be invalid.  In this case there is a mismatch between the fixity values in the manifest and tag manifest files.  See the BagIt specification for more information about fixity checksums and bag verification.</p>
	    <p>
	    <img src="images/bagger_isvalid_no.jpg" alt="Bag is invalid" />
	    </p>
	    <p>Selecting Ok on the popup dialog displays the bag and the ‘Is bag valid?’ state message will now display ‘no’.</p>
      </div>

    <a name="profile"></a>
      <div id="page_head"><h2>Satisfies project profile</h2></div>
      <div id="content">
        <p>If a Project profile other than ‘<no profile>’ has been selected, then the bag is not considered valid until all profile rules have been met for that project.  These rules are determined by adding fields to the Project profile that contain requirement constraints.  Each project contains a unique profile.  Additions to a project profile must be saved and reloaded each time the Bagger application is restarted.  See the section Project profiles for more information.</p>
   		<ul>As an example, selecting the Project profile ‘eDeposit’ will automatically include the Bag-Info fields required for that project.  This Project profile, by default, requires two Bag-Info fields:<br/>
		   <li><b>’LC-Project’</b>: is required to be present and also is required to have a value equal to the project name, e.g. ‘eDeposit’.  This field cannot be modified or removed<br/></li>
		   <li><b>’Publisher’</b>: is required to be present.  This field can be modified but not removed.<br/></li>
		</ul>
		<p>Once a Project profile has been selected, any validation check performed by Bagger will also check whether the bag satisfies the Project profile rules.  Any required fields will be denoted by an ‘R‘adjacent to the field name.</p>
		<p>Enter a value for all ‘Other Bag-Info’ fields and select the ‘Save Bag As’ button.</p>
	    <p>
	    <img src="images/bagger_edeposit_publisher.jpg" alt="Project profile eDeposit with Publisher" />
	    </p>
	    <p>
	    <img src="images/bagger_edeposit_onsave.jpg" alt="Save Bag As Project profile eDeposit" />
	    </p>
	    <p>Select the bag file name you desire, select the ‘Verify Bag after Save?’ checkbox, and then select the ‘Save’ button.</p>
	    <p>
	    <img src="images/bagger_edeposit_satisfied_yes.jpg" alt="Satisfies project profile" />
	    </p>
	    <p>Once you have selected Ok to confirm all of the popup dialog windows, the status console will now display  ‘yes’ for all three status checks.  Since a Project profile is selected, the ‘Satisfies project profile?’ status is also set to ‘yes’.</p>
      </div>

      <div id="page_head"><h2>Unsatisfied project profile</h2></div>
      <div id="content">
        <p>If there are missing required Bag-Info fields, the ‘Check is complete’ or ‘Check is valid’ test will include a warning about any unsatisfied fields from the Project profile.  An invalid bag can still be saved; however, it will not be considered a valid bag for the selected project.</p>
        <p>To demonstrate, do not enter a value in the ‘eDeposit’ required field ‘Publisher’.  Then select the ‘Save Bag As’ button.</p>
	    <p>
	    <img src="images/bagger_edeposit_nopublisher.jpg" alt="Project profile eDeposit with no Publisher" />
	    </p>
	    <p>
	    <img src="images/bagger_edeposit_valid_onsave.jpg" alt="Save Bag as project profile" />
	    </p>
	    <p>Select the bag file name you desire, select the ‘Verify Bag after Save?’ checkbox, and then select the ‘Save’ button.</p>
	    <p>
	    <img src="images/bagger_edeposit_unsatisfied.jpg" alt="Project profile validation failed" />
	    </p>
	    <p>After the bag is saved and the validation check is performed, a ‘Warning - validation failed’ dialog appears indicating that the, 'Required field Publisher is not provided.'  Selecting the Ok button will update the bag status console.</p>
	    <p>
	    <img src="images/bagger_edeposit_satisfied_no.jpg" alt="Does not satisfy project profile" />
	    </p>
	    <p>Since a Project profile is selected, and there is a missing required field value, the ‘Satisfies project profile?’ status is set to ‘no’.</p>
      </div>

    <div id="content">
      <a href="bagfiles.html">Previous</a>
      <a href="baginfo.html">Next</a>
    </div>
  </div>
  </div>

  <div id="footer">
    <ul id="footlist">
      <li><a href="http://www.loc.gov/index.html">Library of Congress</a>&nbsp;|</li>
      <li><a href="https://beryllium.rdc.lctl.gov/rdc/wiki/Main_Page">About Repository Development Center</a></li>
    </ul>
  </div>
</div>
</body>
</html>